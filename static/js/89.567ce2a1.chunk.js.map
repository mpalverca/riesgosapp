{"version":3,"file":"static/js/89.567ce2a1.chunk.js","mappings":"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","sources":["routes/analisis/afects/afects.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport {\r\n  MapContainer,\r\n  TileLayer,\r\n  Marker,\r\n  Popup,\r\n  Polygon,\r\n  useMapEvents\r\n} from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport {\r\n  Slider,\r\n  Typography,\r\n  Button,\r\n  Box,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Paper,\r\n  CircularProgress,\r\n  Alert,\r\n} from \"@mui/material\";\r\nimport { FaWater, FaMountain, FaBuilding, FaExclamationTriangle } from \"react-icons/fa\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport { divIcon } from \"leaflet\";\r\nimport PropTypes from 'prop-types';\r\n\r\n// Importaciones locales\r\nimport imageLoad from \"../../../assets/loading_map_3.gif\";\r\nimport { cargardatoformId, generarPDF } from \"./script.js\";\r\nimport { cargarDatosPol } from \"../../../components/maps/script/script.js\";\r\n\r\n// Estilos CSS de Leaflet\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\n// Configuración de iconos para Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\").default,\r\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\").default,\r\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\r\n});\r\n\r\n// Constantes y configuraciones\r\nconst DEFAULT_POSITION = [-3.9939, -79.2042];\r\nconst COLOR_PRIORIDAD = {\r\n  Alta: \"#dc3545\",\r\n  Media: \"#ffc107\",\r\n  Baja: \"#28a745\",\r\n  DEFAULT: \"#007bff\",\r\n};\r\n\r\nconst POLYGON_COLORS = {\r\n  tipo1: { color: \"#ffff00\", fillColor: \"#ffff00\", fillOpacity: 0.2 },\r\n  tipo2: { color: \"#0000ff\", fillColor: \"#0000ff\", fillOpacity: 0.2 },\r\n  parroquia: { color: \"#050505\", fillColor: \"#b6b1b1\", fillOpacity: 0.2 },\r\n};\r\n\r\nconst EVENT_ICONS = {\r\n  \"Movimiento en masas\": { icon: FaMountain, color: \"#FF5733\" },\r\n  \"Inundación\": { icon: FaWater, color: \"Blue\" },\r\n  \"Colapso estructural\": { icon: FaBuilding, color: \"Blue\" },\r\n  \"default\": { icon: FaExclamationTriangle, color: \"#080808\" },\r\n};\r\n\r\n// Componente para imagen expandida\r\nconst ExpandedImageModal = ({ src, onClose }) => (\r\n  <div\r\n    style={{\r\n      position: \"fixed\",\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: \"rgba(0,0,0,0.8)\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      zIndex: 9999,\r\n      padding: \"20px\",\r\n    }}\r\n    onClick={onClose}\r\n    role=\"dialog\"\r\n    aria-label=\"Imagen expandida\"\r\n  >\r\n    <div\r\n      style={{\r\n        maxWidth: \"90%\",\r\n        maxHeight: \"90%\",\r\n        position: \"relative\",\r\n      }}\r\n      onClick={(e) => e.stopPropagation()}\r\n    >\r\n      <img\r\n        src={src}\r\n        alt=\"Imagen expandida\"\r\n        style={{\r\n          maxWidth: \"100%\",\r\n          maxHeight: \"90vh\",\r\n          borderRadius: \"8px\",\r\n          boxShadow: \"0 4px 20px rgba(0,0,0,0.25)\",\r\n        }}\r\n      />\r\n      <button\r\n        onClick={onClose}\r\n        style={{\r\n          position: \"absolute\",\r\n          top: \"-15px\",\r\n          right: \"-15px\",\r\n          background: \"#dc3545\",\r\n          color: \"white\",\r\n          border: \"none\",\r\n          borderRadius: \"50%\",\r\n          width: \"30px\",\r\n          height: \"30px\",\r\n          fontSize: \"16px\",\r\n          cursor: \"pointer\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n        aria-label=\"Cerrar imagen\"\r\n      >\r\n        ×\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nExpandedImageModal.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n\r\n// Componente de capa de control\r\nconst LayerControl = ({ showLayer, onToggle }) => (\r\n  <Paper\r\n    sx={{\r\n      position: \"absolute\",\r\n      top: 10,\r\n      right: 10,\r\n      zIndex: 1000,\r\n      padding: 2,\r\n      backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n      borderRadius: 2,\r\n      boxShadow: 3,\r\n      minWidth: 200,\r\n    }}\r\n  >\r\n    <Typography variant=\"subtitle1\" fontWeight=\"bold\" gutterBottom>\r\n      Control de Capas\r\n    </Typography>\r\n    <FormControlLabel\r\n      control={\r\n        <Checkbox\r\n          checked={showLayer}\r\n          onChange={onToggle}\r\n          color=\"primary\"\r\n          aria-label=\"Mostrar capa de polígonos\"\r\n        />\r\n      }\r\n      label=\"Mostrar capa de polígonos\"\r\n    />\r\n  </Paper>\r\n);\r\n\r\nLayerControl.propTypes = {\r\n  showLayer: PropTypes.bool.isRequired,\r\n  onToggle: PropTypes.func.isRequired,\r\n};\r\n\r\n// Componente principal\r\nconst MapAfects = ({\r\n  afectData = [],\r\n  parroquia = [],\r\n  loading = false,\r\n  error = null,\r\n  coords = [],\r\n  extractCoordinates,\r\n  selectedDate,\r\n  setSelectedDate,\r\n  minFecha,\r\n  maxFecha,\r\n  radioAfect,\r\n}) => {\r\n  const [expandedImage, setExpandedImage] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const [showLayer, setShowLayer] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [poligonosData, setPoligonosData] = useState([]);\r\n  const [loadingPoligonos, setLoadingPoligonos] = useState(false);\r\n\r\n  // Cargar usuario desde localStorage\r\n  useEffect(() => {\r\n    try {\r\n      const userData = localStorage.getItem(\"user\");\r\n      if (userData) {\r\n        setUser(JSON.parse(userData));\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error al cargar usuario:\", error);\r\n    }\r\n  }, []);\r\n\r\n  // Cargar datos de polígonos cuando se activa la capa\r\n  useEffect(() => {\r\n    const loadPoligonos = async () => {\r\n      if (showLayer && poligonosData.length === 0) {\r\n        setLoadingPoligonos(true);\r\n        try {\r\n          const data = await cargarDatosPol();\r\n          setPoligonosData(data || []);\r\n        } catch (error) {\r\n          console.error(\"Error al cargar polígonos:\", error);\r\n        } finally {\r\n          setLoadingPoligonos(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadPoligonos();\r\n  }, [showLayer, poligonosData.length]);\r\n\r\n  const handleIconClick = useCallback(async (itemId) => {\r\n    try {\r\n      const itemData = await cargardatoformId(itemId);\r\n      if (itemData) {\r\n        setSelectedItem(itemData);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error al cargar datos del item:\", error);\r\n    }\r\n  }, []);\r\n\r\n  const formatCoords = useCallback((coord) => {\r\n    return typeof coord === 'number' ? coord.toFixed(6) : '0.000000';\r\n  }, []);\r\n\r\n  const getEventIcon = useCallback((eventType, priority) => {\r\n    const color = COLOR_PRIORIDAD[priority] || COLOR_PRIORIDAD.DEFAULT;\r\n    const eventConfig = EVENT_ICONS[eventType] || EVENT_ICONS.default;\r\n    const IconComponent = eventConfig.icon;\r\n\r\n    const circleStyle = {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      background: color,\r\n      borderRadius: \"50%\",\r\n      width: \"24px\",\r\n      height: \"24px\",\r\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\",\r\n    };\r\n\r\n    const html = renderToString(\r\n      <div style={circleStyle}>\r\n        <IconComponent color={eventConfig.color} size={14} />\r\n      </div>\r\n    );\r\n\r\n    return divIcon({\r\n      html,\r\n      className: \"custom-leaflet-icon\",\r\n      iconSize: [30, 30],\r\n      iconAnchor: [15, 30],\r\n    });\r\n  }, []);\r\n\r\n  const getEventIconPulso = useCallback((eventType, priority, radio) => {\r\n    const color = COLOR_PRIORIDAD[priority] || COLOR_PRIORIDAD.DEFAULT;\r\n    const eventConfig = EVENT_ICONS[eventType] || EVENT_ICONS.default;\r\n    const IconComponent = eventConfig.icon;\r\n\r\n    // Calcular tamaño basado en el radio\r\n    const baseSize = 40; // Tamaño base en píxeles\r\n    const radioFactor = radio/25 //Math.min(Math.max(radio / 100, 1), 5); // Factor entre 1 y 5\r\n    const calculatedSize = baseSize * radioFactor;\r\n    \r\n    // Tamaños proporcionales\r\n    const outerCircleSize = calculatedSize;\r\n    const middleCircleSize = calculatedSize * 0.75;\r\n    const innerCircleSize = calculatedSize * 0.6;\r\n\r\n    const html = renderToString(\r\n      <div style={{\r\n        position: 'relative',\r\n        width: `${outerCircleSize}px`,\r\n        height: `${outerCircleSize}px`,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}>\r\n        {/* Círculos concéntricos animados - tamaño basado en radio */}\r\n        <div style={{\r\n          position: 'absolute',\r\n          width: `${outerCircleSize}px`,\r\n          height: `${outerCircleSize}px`,\r\n          borderRadius: '50%',\r\n          backgroundColor: color,\r\n          opacity: 0.3,\r\n          animation: 'pulse 2s infinite',\r\n        }} />\r\n        \r\n        <div style={{\r\n          position: 'absolute',\r\n          width: `${middleCircleSize}px`,\r\n          height: `${middleCircleSize}px`,\r\n          borderRadius: '50%',\r\n          backgroundColor: color,\r\n          opacity: 0.5,\r\n          animation: 'pulse 2s infinite',\r\n          animationDelay: '0.5s',\r\n        }} />\r\n        \r\n        {/* Círculo central con icono */}\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          background: color,\r\n          borderRadius: '50%',\r\n          width: `24px`,\r\n          height: `24px`,\r\n          boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n          zIndex: 10,\r\n          position: 'relative',\r\n        }}>\r\n          <IconComponent color=\"white\" size={12} />\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    return divIcon({\r\n      html,\r\n      className: `custom-leaflet-icon emergency-alert radio-${Math.round(radio)}`,\r\n      iconSize: [outerCircleSize, outerCircleSize],\r\n      iconAnchor: [outerCircleSize / 2, outerCircleSize],\r\n    });\r\n  }, []);\r\n\r\n  const renderAfectMarkers = useMemo(() => {\r\n    return afectData\r\n      .map((item, index) => {\r\n        try {\r\n          if (!item?.geom) {\r\n            console.warn(\"Item sin geometría:\", item);\r\n            return null;\r\n          }\r\n\r\n          const coords = extractCoordinates?.(item.geom);\r\n          if (!coords || typeof coords.lat !== 'number' || typeof coords.lng !== 'number') {\r\n            console.warn(\"Coordenadas inválidas para el item:\", item);\r\n            return null;\r\n          }\r\n\r\n          const eventType = item.event || \"default\";\r\n          const priority = item.prioridad || \"DEFAULT\";\r\nconsole.log(item)\r\n      \r\n          return (\r\n            <Marker\r\n              key={`marker-${item.id || `index-${index}`}`}\r\n              position={[coords.lat, coords.lng]}\r\n              icon={item.radio > 0 && priority==\"Alta\" && item.estado==\"Pendiente\" ?  getEventIconPulso(eventType, priority,item.radio):getEventIcon(eventType, priority) }\r\n              eventHandlers={{\r\n                click: () => handleIconClick(item.id),\r\n              }}\r\n            >\r\n              {selectedItem?.id === item.id && (\r\n                <Popup>\r\n                  <div>\r\n                    <h4>{`${item.id} - ${eventType}`}</h4>\r\n                    \r\n                    {selectedItem.anex_foto && (\r\n                      <div style={{ marginTop: \"10px\" }}>\r\n                        <img\r\n                          src={selectedItem.anex_foto}\r\n                          alt={`Imagen de ${selectedItem.nombre || \"afectación\"}`}\r\n                          style={{\r\n                            width: \"100%\",\r\n                            height: \"auto\",\r\n                            maxHeight: \"200px\",\r\n                            objectFit: \"contain\",\r\n                            borderRadius: \"4px\",\r\n                            border: \"1px solid #ddd\",\r\n                            cursor: \"pointer\",\r\n                          }}\r\n                          onClick={() => setExpandedImage(selectedItem.anex_foto)}\r\n                        />\r\n                        <p style={{ fontSize: \"0.8em\", color: \"#666\", textAlign: \"center\" }}>\r\n                          Haz clic para ampliar\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n\r\n                    <p><strong>Fecha:</strong> {selectedItem.date || \"No disponible\"}</p>\r\n                    <p><strong>Sector:</strong> {selectedItem.sector || \"No disponible\"}</p>\r\n                    <p>\r\n                      <strong>Ubicación:</strong> {formatCoords(coords.lat)}, {formatCoords(coords.lng)}\r\n                    </p>\r\n                    <p>\r\n                      <strong>Prioridad:</strong>\r\n                      <span style={{ color: COLOR_PRIORIDAD[priority] || COLOR_PRIORIDAD.DEFAULT }}>\r\n                        {\" \"}{priority}\r\n                      </span>\r\n                    </p>\r\n                    \r\n                    {selectedItem.descripcio && (\r\n                      <p><strong>Descripción:</strong> {selectedItem.descripcio}</p>\r\n                    )}\r\n\r\n                    {user && (\r\n                      <Button\r\n                        onClick={() => generarPDF(\r\n                          selectedItem.event,\r\n                          coords.lat,\r\n                          coords.lng,\r\n                          selectedItem,\r\n                          user\r\n                        )}\r\n                        fullWidth\r\n                        sx={{\r\n                          background: \"linear-gradient(45deg, #FF5733 20%, #FFD700 90%)\",\r\n                          marginTop: \"16px\",\r\n                          fontWeight: \"bold\",\r\n                        }}\r\n                        variant=\"contained\"\r\n                      >\r\n                        Generar Reporte PDF\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </Popup>\r\n              )}\r\n            </Marker>\r\n          );\r\n        } catch (error) {\r\n          console.error(\"Error al renderizar marcador:\", item, error);\r\n          return null;\r\n        }\r\n      })\r\n      .filter(Boolean);\r\n  }, [afectData, selectedItem, user, formatCoords, getEventIcon, handleIconClick, extractCoordinates]);\r\n\r\n  const renderPoligonos = useMemo(() => {\r\n    if (!showLayer || loadingPoligonos) return null;\r\n\r\n    return poligonosData.flatMap((item, index) => {\r\n      try {\r\n        if (!item?.geom?.coordinates) return null;\r\n\r\n        return item.geom.coordinates.map((polygon, polyIndex) => {\r\n          const polyCoords = polygon[0].map(coord => [coord[1], coord[0]]);\r\n          const colors = item.tipo === 1 ? POLYGON_COLORS.tipo1 : POLYGON_COLORS.tipo2;\r\n\r\n          return (\r\n            <Polygon\r\n              key={`poligono-${item.id}-${index}-${polyIndex}`}\r\n              positions={polyCoords}\r\n              pathOptions={{\r\n                color: colors.color,\r\n                fillColor: colors.fillColor,\r\n                fillOpacity: colors.fillOpacity,\r\n                weight: 2,\r\n              }}\r\n            >\r\n              <Popup>\r\n                <div>\r\n                  <h4>Polígono {item.id}</h4>\r\n                  <p><strong>Descripción:</strong> {item.Descripcio || \"Sin descripción\"}</p>\r\n                </div>\r\n              </Popup>\r\n            </Polygon>\r\n          );\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error al renderizar polígono:\", item, error);\r\n        return null;\r\n      }\r\n    }).filter(Boolean);\r\n  }, [poligonosData, showLayer, loadingPoligonos]);\r\n\r\n  const renderParroquiaPolygons = useMemo(() => {\r\n    return parroquia.flatMap((item, index) => {\r\n      if (!item?.geom || item.geom.type !== \"MultiPolygon\") return null;\r\n\r\n      return item.geom.coordinates.map((poly, polyIdx) => {\r\n        const polyCoords = poly[0].map(coord => [coord[1], coord[0]]);\r\n        \r\n        return (\r\n          <Polygon\r\n            key={`parroquia-${item.id || index}-${polyIdx}`}\r\n            positions={polyCoords}\r\n            pathOptions={{\r\n              color: POLYGON_COLORS.parroquia.color,\r\n              fillColor: POLYGON_COLORS.parroquia.fillColor,\r\n              fillOpacity: POLYGON_COLORS.parroquia.fillOpacity,\r\n              weight: 2,\r\n            }}\r\n          >\r\n            <Popup>\r\n              <strong>Parroquia:</strong> {item.DPA_DESPAR || \"Sin nombre\"}\r\n            </Popup>\r\n          </Polygon>\r\n        );\r\n      });\r\n    }).filter(Boolean);\r\n  }, [parroquia]);\r\n\r\n  // Calcular posición del mapa\r\n  const mapCenter = useMemo(() => {\r\n    if (coords && coords.length >= 2) {\r\n      const lat = parseFloat(coords[0]);\r\n      const lng = parseFloat(coords[1]);\r\n      if (!isNaN(lat) && !isNaN(lng)) {\r\n        return [lat, lng];\r\n      }\r\n    }\r\n    return DEFAULT_POSITION;\r\n  }, [coords]);\r\n\r\n  // Estados de carga y error\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        minHeight=\"60vh\"\r\n      >\r\n        <img \r\n          src={imageLoad} \r\n          alt=\"Cargando mapa...\" \r\n          //style={{ maxWidth: \"200px\" }}\r\n        />\r\n        <Typography variant=\"body1\" sx={{ mt: 2 }}>\r\n          Cargando datos del mapa...\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Alert severity=\"error\" sx={{ m: 2 }}>\r\n        Error: {error}\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  if (!afectData.length) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        minHeight=\"60vh\"\r\n        textAlign=\"center\"\r\n        p={3}\r\n      >\r\n        <Typography variant=\"h5\" gutterBottom color=\"textSecondary\">\r\n          No hay datos de afectaciones\r\n        </Typography>\r\n        <Typography variant=\"body1\" color=\"textSecondary\">\r\n          La búsqueda realizada no ha encontrado datos de afectaciones.\r\n          Por favor, intente con otra fecha, prioridad o criterios de búsqueda.\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ position: \"relative\" }}>\r\n      <style>\r\n        {`\r\n          .leaflet-pulse-circle {\r\n            animation: pulse 2s infinite;\r\n            opacity: 0.3;\r\n          }\r\n          \r\n          @keyframes pulse {\r\n            0% {\r\n              transform: scale(0.9);\r\n              opacity: 0.5;\r\n            }\r\n            70% {\r\n              transform: scale(1.2);\r\n              opacity: 0.2;\r\n            }\r\n            100% {\r\n              transform: scale(0.9);\r\n              opacity: 0.5;\r\n            }\r\n          }\r\n        `}\r\n      </style>\r\n\r\n      <LayerControl \r\n        showLayer={showLayer} \r\n        onToggle={(e) => setShowLayer(e.target.checked)} \r\n      />\r\n\r\n      <MapContainer\r\n        center={mapCenter}\r\n        zoom={14}\r\n        style={{ height: \"75vh\", width: \"100%\" }}\r\n        scrollWheelZoom={true}\r\n      >\r\n        <TileLayer\r\n          url=\"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}\"\r\n          attribution=\"&copy; Google Maps\"\r\n        />\r\n        \r\n        {renderAfectMarkers}\r\n        {renderPoligonos}\r\n        {renderParroquiaPolygons}\r\n        \r\n        {loadingPoligonos && (\r\n          <div style={{\r\n            position: \"absolute\",\r\n            top: \"10px\",\r\n            left: \"10px\",\r\n            zIndex: 1000,\r\n            background: \"white\",\r\n            padding: \"5px 10px\",\r\n            borderRadius: \"4px\",\r\n            fontSize: \"12px\",\r\n          }}>\r\n            Cargando polígonos...\r\n          </div>\r\n        )}\r\n      </MapContainer>\r\n\r\n      {expandedImage && (\r\n        <ExpandedImageModal \r\n          src={expandedImage} \r\n          onClose={() => setExpandedImage(null)} \r\n        />\r\n      )}\r\n\r\n      {minFecha && maxFecha && (\r\n        <Box sx={{ width: \"90%\", margin: \"30px auto 0 auto\" }}>\r\n          <Slider\r\n            value={selectedDate || maxFecha}\r\n            min={minFecha}\r\n            max={maxFecha}\r\n            step={24 * 60 * 60 * 1000}\r\n            onChange={(_, value) => setSelectedDate(value)}\r\n            valueLabelDisplay=\"auto\"\r\n            valueLabelFormat={(value) =>\r\n              new Date(value).toLocaleDateString(\"es-EC\", {\r\n                year: \"numeric\",\r\n                month: \"short\",\r\n                day: \"numeric\",\r\n              })\r\n            }\r\n            sx={{\r\n              color: \"orange\",\r\n              height: 8,\r\n              '& .MuiSlider-thumb': {\r\n                backgroundColor: \"#fff\",\r\n                border: \"2px solid orange\",\r\n              },\r\n              '& .MuiSlider-valueLabel': {\r\n                backgroundColor: \"orange\",\r\n                color: \"#fff\",\r\n                borderRadius: \"4px\",\r\n                padding: \"4px 8px\",\r\n              },\r\n            }}\r\n          />\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              marginTop: \"-10px\",\r\n              fontSize: \"0.75rem\",\r\n              color: \"text.secondary\",\r\n            }}\r\n          >\r\n            <span>\r\n              {new Date(minFecha).toLocaleDateString(\"es-EC\", {\r\n                year: \"numeric\",\r\n                month: \"short\",\r\n                day: \"numeric\",\r\n              })}\r\n            </span>\r\n            <span>\r\n              {new Date(maxFecha).toLocaleDateString(\"es-EC\", {\r\n                year: \"numeric\",\r\n                month: \"short\",\r\n                day: \"numeric\",\r\n              })}\r\n            </span>\r\n          </Box>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\n// PropTypes para validación de props\r\nMapAfects.propTypes = {\r\n  afectData: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    geom: PropTypes.string,\r\n    event: PropTypes.string,\r\n    prioridad: PropTypes.string,\r\n  })),\r\n  parroquia: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    geom: PropTypes.shape({\r\n      type: PropTypes.string,\r\n      coordinates: PropTypes.array,\r\n    }),\r\n    DPA_DESPAR: PropTypes.string,\r\n  })),\r\n  loading: PropTypes.bool,\r\n  error: PropTypes.string,\r\n  coords: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number])),\r\n  extractCoordinates: PropTypes.func.isRequired,\r\n  selectedDate: PropTypes.number,\r\n  setSelectedDate: PropTypes.func,\r\n  minFecha: PropTypes.number,\r\n  maxFecha: PropTypes.number,\r\n  radioAfect: PropTypes.number,\r\n};\r\n\r\n// Valores por defecto\r\nMapAfects.defaultProps = {\r\n  afectData: [],\r\n  parroquia: [],\r\n  loading: false,\r\n  error: null,\r\n  coords: [],\r\n  selectedDate: null,\r\n  minFecha: null,\r\n  maxFecha: null,\r\n  radioAfect: 1000,\r\n};\r\n\r\nexport default React.memo(MapAfects);"],"names":["L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","DEFAULT_POSITION","COLOR_PRIORIDAD","Alta","Media","Baja","DEFAULT","POLYGON_COLORS","tipo1","color","fillColor","fillOpacity","tipo2","parroquia","EVENT_ICONS","icon","FaMountain","FaWater","FaBuilding","FaExclamationTriangle","ExpandedImageModal","_ref","src","onClose","_jsx","style","position","top","left","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","padding","onClick","role","children","_jsxs","maxWidth","maxHeight","e","stopPropagation","alt","borderRadius","boxShadow","background","border","width","height","fontSize","cursor","LayerControl","_ref2","showLayer","onToggle","Paper","sx","minWidth","Typography","variant","fontWeight","gutterBottom","FormControlLabel","control","Checkbox","checked","onChange","label","MapAfects","_ref3","afectData","loading","error","coords","extractCoordinates","selectedDate","setSelectedDate","minFecha","maxFecha","radioAfect","expandedImage","setExpandedImage","useState","user","setUser","setShowLayer","selectedItem","setSelectedItem","poligonosData","setPoligonosData","loadingPoligonos","setLoadingPoligonos","useEffect","userData","localStorage","getItem","JSON","parse","console","async","length","data","cargarDatosPol","loadPoligonos","handleIconClick","useCallback","itemData","cargardatoformId","itemId","formatCoords","coord","toFixed","getEventIcon","eventType","priority","eventConfig","default","IconComponent","circleStyle","html","renderToString","size","divIcon","className","iconSize","iconAnchor","getEventIconPulso","radio","calculatedSize","outerCircleSize","middleCircleSize","opacity","animation","animationDelay","Math","round","renderAfectMarkers","useMemo","map","item","index","geom","warn","lat","lng","event","prioridad","log","Marker","estado","eventHandlers","click","id","Popup","anex_foto","marginTop","nombre","objectFit","textAlign","date","sector","descripcio","Button","generarPDF","fullWidth","filter","Boolean","renderPoligonos","flatMap","_item$geom","coordinates","polygon","polyIndex","polyCoords","colors","tipo","Polygon","positions","pathOptions","weight","Descripcio","renderParroquiaPolygons","type","poly","polyIdx","DPA_DESPAR","mapCenter","parseFloat","isNaN","Box","flexDirection","minHeight","imageLoad","mt","Alert","severity","m","target","MapContainer","center","zoom","scrollWheelZoom","TileLayer","url","attribution","margin","Slider","value","min","max","step","_","valueLabelDisplay","valueLabelFormat","Date","toLocaleDateString","year","month","day","p","defaultProps","React"],"sourceRoot":""}